[назад](design_process.md)

## 1. Общая функциональность сервиса
1. **Сокращение ссылок**  
   1.1. Система должна принимать длинный URL и преобразовывать его в короткую ссылку.  
   1.2. Разные пользователи, даже при одинаковом URL, должны получать **уникальные** короткие ссылки.  
   1.3. Повторный запрос на сокращение той же ссылки у одного и того же пользователя даёт **новую** короткую ссылку.

2. **Переход по короткой ссылке**  
   2.1. При вводе короткой ссылки в консоль (или открытии любым способом) пользователь должен перенаправляться на исходный ресурс.  
   2.2. Для открытия используется вызов `Desktop.getDesktop().browse(new URI(...))` (по примеру в ТЗ).

3. **Многопользовательский режим**  
   3.1. Сервис должен поддерживать работу **нескольких** пользователей.  
   3.2. Один пользователь может создать **несколько** коротких ссылок.

4. **Уведомления пользователя**  
   4.1. Пользователь уведомляется, когда ссылка становится недоступной из-за лимита переходов или истечения срока.

---

## 2. Идентификация и права доступа
1. **Использование UUID**  
   1.1. Каждый пользователь идентифицируется по уникальному UUID, сгенерированному при первом запросе на создание ссылки.  
   1.2. UUID используется для всех последующих действий (редактирование, удаление, просмотр ссылок).

2. **Доступ к операциям**  
   2.1. Только создатель ссылки (обладатель соответствующего UUID) может редактировать её или удалять.  
   2.2. При повторных запросах тот же пользователь (с тем же UUID) должен иметь доступ к ранее созданным ссылкам.

---

## 3. Ограничения и автоматическая блокировка
1. **Лимит переходов**  
   1.1. Пользователь задаёт максимальное количество переходов.  
   1.2. Ссылка блокируется после достижения заданного лимита.  
   1.3. Пользователь может **редактировать** лимит переходов, если он является владельцем ссылки.

2. **Время жизни ссылки**  
   2.1. Время жизни ссылки задаётся системой (или ограничивается конфигурационным файлом).  
   2.2. По истечении срока ссылка должна автоматически удаляться (или становиться недоступной).

3. **Автоматическое удаление/блокировка**  
   3.1. Удаление ссылки при превышении лимита переходов (или при достижении лимита — если блокируется, должна быть явная блокировка).  
   3.2. Удаление «протухших» ссылок по истечении времени жизни.

---

## 4. Настройки и конфигурация
1. **Конфигурационный файл**  
   1.1. Основные параметры (время жизни ссылки, лимит переходов) должны быть вынесены в конфигурационный файл.  
   1.2. Пользователь при создании может указать лимит переходов или желаемое время жизни, однако конечные значения определяются с учётом настроек в конфиге:  
   &nbsp;&nbsp;• Для **времени жизни** берётся **меньшее** из (значение пользователя, значение в конфиге).  
   &nbsp;&nbsp;• Для **лимита переходов** берётся **большее** из (значение пользователя, значение в конфиге).  
   1.3. Конфигурация подключается без изменения исходного кода (отдельный файл).

2. **Хранение параметров**  
   2.1. Система должна хранить параметры каждой ссылки (лимит, время создания, срок действия и т.д.) для корректной работы всех механизмов.  
   2.2. При редактировании (изменении лимита и др.) обновлённые значения должны сохраняться.

---

## 5. Удаление и редактирование ссылок
1. **Удаление**  
   1.1. Пользователь может **ручным образом** удалить собственную ссылку (до истечения срока/лимита).  
   1.2. Ссылки автоматически удаляются/блокируются при истечении срока или превышении лимита.

2. **Редактирование**  
   2.1. Пользователь (только владелец) может изменить лимит переходов.  
   2.2. Изменение времени жизни в ТЗ напрямую не указано (частично оно задано системой/конфигом), но если предусмотрено, то тоже только автором.

---

## 6. Консольный интерфейс
1. **Общая работа через консоль**  
   1.1. Создание короткой ссылки (передача исходного URL, лимита переходов, желаемого срока).  
   1.2. Ввод (или выбор) короткой ссылки и переход к оригинальному URL.  
   1.3. Возможность удаления, просмотра или изменения параметров (лимита) ссылки.  
   1.4. Отображение уведомлений в консоли (например, при попытке перейти по блокированной ссылке).

---

## 7. Критерии оценивания (привязка к требованиям)
1. **Функциональность**
    - Корректная работа алгоритма сокращения (уникальная короткая ссылка).
2. **Параметры в конфигурационном файле**
    - Подключение без изменения кода.
    - Правило «меньшее из сроков» и «большее из лимитов».
3. **Ограничение времени жизни**
    - Автоматическое удаление просроченных ссылок.
4. **Автоматическое удаление ссылок**
    - По исчерпании лимита переходов или времени жизни.
5. **Уникальность ссылок**
    - Разные пользователи → разные короткие ссылки для одного URL.
6. **Повторное создание**
    - Новая короткая ссылка при повторном запросе даже на тот же URL.
7. **Переход по ссылке**
    - Ввод короткой ссылки → открытие оригинального ресурса.
8. **Лимит переходов**
    - Блокировка после достижения лимита; берётся большее из (значение пользователя, значение в конфиге).
9. **Уведомление**
    - Сообщение при блокировке/истечении.
10. **Редактирование лимита**
    - Возможность изменить лимит переходов (только для создателя).
11. **Удаление ссылки**
    - Возможность удаления своих ссылок.
12. **Идентификация по UUID**
    - Редактировать/удалять может только владелец.
13. **Работа нескольких пользователей**
    - Каждый пользователь ведёт свой пул ссылок.
14. **Администрирование параметров**
    - Только создатель может менять параметры.
15. **Создание нескольких ссылок**
    - Один пользователь может иметь множество ссылок.
16. **Идентификация при повторных запросах**
    - Использование того же UUID для доступа к ранее созданным ссылкам.

---
